<div
  [ngClass]="{
    'flex w-full gap-3 p-4': true,
    'bg-gray-200/30 dark:bg-gray-700/30': isUser(),
    'bg-white dark:bg-gray-900': !isUser()
  }"
>
  <div
    [ngClass]="{
      'flex h-8 w-8 shrink-0 items-center justify-center rounded-md': true,
      'bg-blue-600 text-white dark:bg-blue-500': isUser(),
      'bg-gray-200 dark:bg-gray-700': !isUser()
    }"
  >
    <svg *ngIf="isUser()" class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
    </svg>
    <svg *ngIf="!isUser()" class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 10h4m-2-2v4m6 4H6a2 2 0 01-2-2V6a2 2 0 012-2h12a2 2 0 012 2v8a2 2 0 01-2 2z"></path>
    </svg>
  </div>

  <div class="flex-1 space-y-2">
    <div class="prose prose-sm max-w-none dark:text-white">
      <ng-container *ngIf="message.loading; else content">
        <div class="h-4 w-2/3 bg-gray-300 rounded dark:bg-gray-600"></div>
        <div class="mt-2 h-4 w-1/2 bg-gray-300 rounded dark:bg-gray-600"></div>
      </ng-container>
      <ng-template #content>
        <div [innerHTML]="message.content"></div>
      </ng-template>
    </div>
    <div class="text-xs text-gray-500 dark:text-gray-400">
      {{ message.loading ? 'Generating response...' : message.timestamp.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }) }}
    </div>
  </div>
</div>
